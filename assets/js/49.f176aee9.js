(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{471:function(t,a,s){"use strict";s.r(a);var e=s(0),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://mybatis.org/mybatis-3/zh/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("mybatis文档"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("code",[t._v("MyBatis")]),t._v(" 是支持定制化"),a("code",[t._v("SQL")]),t._v("、存储过程以及高级映射的优秀的持久层框架。")]),t._v(" "),a("p",[a("code",[t._v("MyBatis")]),t._v(" 避免了几乎所有的 "),a("code",[t._v("JDBC")]),t._v(" 代码和手动设置参数以及获取结果集。")]),t._v(" "),a("p",[a("code",[t._v("MyBatis")]),t._v("可以使用简单的"),a("code",[t._v("XML")]),t._v("或注解用于配置和原始映射，将接口和"),a("code",[t._v("Java")]),t._v("的"),a("code",[t._v("POJO（Plain Old Java Objects")]),t._v("，普通的"),a("code",[t._v("Java")]),t._v("对象）映射成数据库中的记录。")]),t._v(" "),a("p",[a("strong",[t._v("为什么要使用"),a("code",[t._v("mybatis")])])]),t._v(" "),a("p",[a("code",[t._v("MyBatis")]),t._v("是一个半自动化的持久化层框架。")]),t._v(" "),a("p",[a("code",[t._v("jdbc")]),t._v("编程---当我们使用"),a("code",[t._v("jdbc")]),t._v("持久化的时候，"),a("code",[t._v("sql")]),t._v("语句被硬编码到"),a("code",[t._v("java")]),t._v("代码中。这样耦合度太高。代码不易于维护。在实际项目开发中会经常添加"),a("code",[t._v("sql")]),t._v("或者修改"),a("code",[t._v("sql")]),t._v("，这样我们就只能到"),a("code",[t._v("java")]),t._v("代码中去修改。")]),t._v(" "),a("p",[a("strong",[a("code",[t._v("Hibernate")]),t._v("和"),a("code",[t._v("JPA")])])]),t._v(" "),a("p",[t._v("长难复杂"),a("code",[t._v("SQL")]),t._v("，对于"),a("code",[t._v("Hibernate")]),t._v("而言处理也不容易")]),t._v(" "),a("p",[t._v("内部自动生产的"),a("code",[t._v("SQL")]),t._v("，不容易做特殊优化。")]),t._v(" "),a("p",[t._v("基于全映射的全自动框架，"),a("code",[t._v("javaBean")]),t._v("存在大量字段时无法只映射部分字段。导致数据库性能下降。")]),t._v(" "),a("p",[t._v("对开发人员而言，核心"),a("code",[t._v("sql")]),t._v("还是需要自己优化")]),t._v(" "),a("p",[a("code",[t._v("sql")]),t._v("和"),a("code",[t._v("java")]),t._v("编码分开，功能边界清晰，一个专注业务、一个专注数据。")]),t._v(" "),a("p",[t._v("可以使用简单的"),a("code",[t._v("XML")]),t._v("或注解用于配置和原始映射，将接口和"),a("code",[t._v("Java")]),t._v("的"),a("code",[t._v("POJO")]),t._v("映射成数据库中的记录。成为业务代码+底层数据库的媒介")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://gitee.com/zhongfucheng/Java3y/#mybatis",target:"_blank",rel:"noopener noreferrer"}},[t._v(" 三歪教你学Java-mybatis"),a("OutboundLink")],1)]),t._v(" "),a("h1",{attrs:{id:"mybatis基本工作原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mybatis基本工作原理"}},[t._v("#")]),t._v(" MyBatis基本工作原理")]),t._v(" "),a("p",[a("code",[t._v("MyBatis")]),t._v("通过"),a("code",[t._v("SqlSessionFactoryBuilder")]),t._v("从"),a("code",[t._v("mybatis-config.xml")]),t._v("配置文件中构建出"),a("code",[t._v("SqlSessionFactory")]),t._v("，然后，"),a("code",[t._v("SqlSessionFactory")]),t._v("的实例直接开启一个"),a("code",[t._v("SqlSession")]),t._v("，再通过"),a("code",[t._v("SqlSession实例")]),t._v("获得"),a("code",[t._v("Mapper")]),t._v("对象并运行"),a("code",[t._v("Mapper")]),t._v("映射的"),a("code",[t._v("SQL")]),t._v("语句，完成对数据库的"),a("code",[t._v("CRUD")]),t._v("和事务提交，之后关闭"),a("code",[t._v("SqlSession")]),t._v(".")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/ad49c9f3956f4cf2972d58e861447de7.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RfQV9JX0hfQV9P,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})]),t._v(" "),a("h1",{attrs:{id:"面试题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#面试题"}},[t._v("#")]),t._v(" 面试题")]),t._v(" "),a("h2",{attrs:{id:"和-的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#和-的区别"}},[t._v("#")]),t._v(" #{}和${}的区别")]),t._v(" "),a("p",[a("code",[t._v("#{}")]),t._v("会解析传递进来的参数数据")]),t._v(" "),a("p",[a("code",[t._v("${}")]),t._v("对传递进来的参数原样直接拼接在sql中")]),t._v(" "),a("p",[a("code",[t._v("#{}")]),t._v("是预编译处理，"),a("code",[t._v("${}")]),t._v("是字符串替换。使用"),a("code",[t._v("#{}")]),t._v("可以有效防止"),a("code",[t._v("SQL")]),t._v("注入，提高系统安全性。")]),t._v(" "),a("h2",{attrs:{id:"当实体类中的属性名和表中的字段名不一样-怎么办"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#当实体类中的属性名和表中的字段名不一样-怎么办"}},[t._v("#")]),t._v(" 当实体类中的属性名和表中的字段名不一样，怎么办")]),t._v(" "),a("p",[t._v("1、通过在查询的"),a("code",[t._v("sql")]),t._v("语句中定义字段名的别名，让字段名的别名和实体类的属性名一致\n2、通过"),a("code",[t._v("<resultMap>")]),t._v("来映射字段名和实体类属性名的对应关系")]),t._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("getOrder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("parameterType")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("int"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("resultMap")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("orderresultmap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        select * from orders where order_id=#{id}\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("select")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("resultMap")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("”me.gacl.domain.order”")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("”orderresultmap”")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n   "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("!–用id属性来映射主键字段–")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n   "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("id")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("property")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("”id”")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("column")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("”order_id”")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n   "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("!–用result属性来映射非主键字段，property为实体类属性名，column为数据表中的属性–")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n   "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("result")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("property")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v(" “orderno”")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("column")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("”order_no”/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n   "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("result")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("property")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("”price”")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("column")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("”order_price”")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("reslutMap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("h2",{attrs:{id:"在mapper中如何传递多个参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在mapper中如何传递多个参数"}},[t._v("#")]),t._v(" 在mapper中如何传递多个参数?")]),t._v(" "),a("p",[t._v("1、使用占位符‘")]),t._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[t._v("//对应的xml,#{0}代表接收的是dao层中的第一个参数，#{1}代表dao层中第二参数，更多参数一致往后加即可。\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("selectUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("resultMap")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("BaseResultMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n    select *  fromuser_user_t   whereuser_name = #{0} anduser_area=#{1}  \n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("select")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("2、使用@param注解来命名参数")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" usermapper "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n   user "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectuser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@param")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“username”"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" string username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n     "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@param")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("“hashedpassword”"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" string hashedpassword"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("”selectuser”")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("resulttype")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("”user”")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" \n       select id, username, hashedpassword \n       from some_table \n       where username = #{username} \n       and hashedpassword = #{hashedpassword} \n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("select")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("3、使用Map集合作为参数来装载")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//映射文件的命名空间.SQL片段的ID，就可以调用对应的映射文件中的SQL")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * 由于我们的参数超过了两个，而方法中只有一个Object参数收集\n     * 因此我们使用Map集合来装载我们的参数\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" map "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    map"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"start"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    map"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"end"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" end"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" sqlSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectList")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"StudentID.pagination"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" map"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    sqlSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rollback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MybatisUtil")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("closeSqlSession")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br")])]),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--分页查询--\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("pagination"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("parameterType")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("map"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("resultMap")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("studentMap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\t/*根据key自动找到对应Map集合的value*/\n\tselect * from students limit #{start},#{end};\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("select")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("h2",{attrs:{id:"mybatis动态sql是做什么的-都有哪些动态sql-能简述一下动态sql的执行原理不"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mybatis动态sql是做什么的-都有哪些动态sql-能简述一下动态sql的执行原理不"}},[t._v("#")]),t._v(" "),a("code",[t._v("Mybatis")]),t._v("动态"),a("code",[t._v("sql")]),t._v("是做什么的？都有哪些动态"),a("code",[t._v("sql")]),t._v("？能简述一下动态"),a("code",[t._v("sql")]),t._v("的执行原理不？")]),t._v(" "),a("p",[a("code",[t._v("Mybatis")]),t._v("动态"),a("code",[t._v("sql")]),t._v("可以让我们在Xml映射文件内，以标签的形式编写动态"),a("code",[t._v("sql")]),t._v("，完成逻辑判断和动态拼接"),a("code",[t._v("sql")]),t._v("的功能。")]),t._v(" "),a("p",[a("code",[t._v("Mybatis")]),t._v("提供了9种动态"),a("code",[t._v("sql")]),t._v("标签："),a("code",[t._v("trim|where|set|foreach|if|choose|when|otherwise|bind")]),t._v("。")]),t._v(" "),a("p",[t._v("其执行原理为，使用"),a("code",[t._v("OGNL")]),t._v("从"),a("code",[t._v("sql")]),t._v("参数对象中计算表达式的值，根据表达式的值动态拼接"),a("code",[t._v("sql")]),t._v("，以此来完成动态"),a("code",[t._v("sql")]),t._v("的功能。")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/isea533/article/details/44002219",target:"_blank",rel:"noopener noreferrer"}},[t._v("深入了解MyBatis参数"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/isea533/article/details/50061705",target:"_blank",rel:"noopener noreferrer"}},[t._v("MyBatis中的OGNL教程"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"mybatis的xml映射文件中-不同的xml映射文件-id是否可以重复"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mybatis的xml映射文件中-不同的xml映射文件-id是否可以重复"}},[t._v("#")]),t._v(" Mybatis的Xml映射文件中，不同的Xml映射文件，id是否可以重复？")]),t._v(" "),a("p",[t._v("如果配置了"),a("code",[t._v("namespace")]),t._v("那么当然是可以重复的，因为我们的"),a("code",[t._v("Statement")]),t._v("实际上就是"),a("code",[t._v("namespace+id")])]),t._v(" "),a("p",[t._v("如果没有配置"),a("code",[t._v("namespace")]),t._v("的话，那么相同的id就会导致覆盖了。")]),t._v(" "),a("h2",{attrs:{id:"为什么说mybatis是半自动orm映射工具-它与全自动的区别在哪里"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么说mybatis是半自动orm映射工具-它与全自动的区别在哪里"}},[t._v("#")]),t._v(" 为什么说Mybatis是半自动ORM映射工具？它与全自动的区别在哪里？")]),t._v(" "),a("p",[a("code",[t._v("Hibernate")]),t._v("属于全自动"),a("code",[t._v("ORM")]),t._v("映射工具，使用"),a("code",[t._v("Hibernate")]),t._v("查询关联对象或者关联集合对象时，可以根据对象关系模型直接获取，所以它是全自动的。")]),t._v(" "),a("p",[t._v("而"),a("code",[t._v("Mybatis")]),t._v("在查询关联对象或关联集合对象时，需要手动编写"),a("code",[t._v("sql")]),t._v("来完成，所以，称之为半自动"),a("code",[t._v("ORM")]),t._v("映射工具。")]),t._v(" "),a("h2",{attrs:{id:"通常一个xml映射文件-都会写一个dao接口与之对应-请问-这个dao接口的工作原理是什么-dao接口里的方法-参数不同时-方法能重载吗"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通常一个xml映射文件-都会写一个dao接口与之对应-请问-这个dao接口的工作原理是什么-dao接口里的方法-参数不同时-方法能重载吗"}},[t._v("#")]),t._v(" 通常一个Xml映射文件，都会写一个Dao接口与之对应，请问，这个Dao接口的工作原理是什么？Dao接口里的方法，参数不同时，方法能重载吗？")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("DAO")]),t._v("接口，就是人们常说的"),a("code",[t._v("mapper")]),t._v("接口，接口的全限定名，就是映射文件中的"),a("code",[t._v("namespace")]),t._v("的值，接口的方法名，就是映射文件中"),a("code",[t._v("MappedStatement")]),t._v("的"),a("code",[t._v("id")]),t._v("值，接口方法内的参数，就是传递给"),a("code",[t._v("sql")]),t._v("的参数。")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("Mapper")]),t._v("接口是没有实现类的，当调用接口方时，接口全限定名+方法名拼接字符串作为"),a("code",[t._v("key")]),t._v("值，可唯一定位一个"),a("code",[t._v("MappedStatement")])])])]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mybatis3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mappers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),t._v("StudentDao")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("findStudentById，\n\n可以唯一找到namespace为"),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mybatis3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mappers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),t._v("StudentDao")]),t._v("下面id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" findStudentById的"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MappedStatement")]),t._v("。在"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Mybatis")]),t._v("中，每一个"),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("select"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("、"),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("insert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("、"),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("、"),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("delete"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("标签，都会被解析为一个"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MappedStatement")]),t._v("对象。\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("Dao接口里的方法，是不能重载的，因为是全限名+方法名的保存和寻找策略。")]),t._v(" "),a("p",[t._v("Dao接口的工作原理是JDK动态代理，Mybatis运行时会使用JDK动态代理为Dao接口生成proxy对象，代理对象proxy会拦截接口方法，转而执行MappedStatement所代表的sql，然后将sql执行结果返回。")]),t._v(" "),a("h2",{attrs:{id:"mybatis是否支持延迟加载-如果支持-它的实现原理是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mybatis是否支持延迟加载-如果支持-它的实现原理是什么"}},[t._v("#")]),t._v(" Mybatis是否支持延迟加载？如果支持，它的实现原理是什么？")]),t._v(" "),a("p",[a("code",[t._v("Mybstis")]),t._v("仅支持"),a("code",[t._v("association")]),t._v("关联对象和"),a("code",[t._v("collection")]),t._v("关联集合对象的延迟加载，"),a("code",[t._v("association")]),t._v("指的就是一对一，"),a("code",[t._v("collection")]),t._v("指的就是一对多查询，在"),a("code",[t._v("mybatis")]),t._v("配置文件中，可以配置是否启用延迟加载"),a("code",[t._v("lazyLoadingEnabled=true/false")]),t._v("。")]),t._v(" "),a("p",[t._v("它的原理是，使用"),a("code",[t._v("CGLIB")]),t._v("或"),a("code",[t._v("Javassist( 默认 )")]),t._v("创建目标对象的代理对象。当调用代理对象的延迟加载属性的 "),a("code",[t._v("getting")]),t._v("方法时，进入拦截器方法。比如调用 "),a("code",[t._v("a.getB().getName()")]),t._v("方法，进入拦截器的"),a("code",[t._v("invoke(…)")]),t._v(" 方法，发现"),a("code",[t._v("a.getB()")]),t._v("需要延迟加载时，那么就会单独发送事先保存好的查询关联"),a("code",[t._v("B")]),t._v("对象的 "),a("code",[t._v("SQL")]),t._v(" ，把 "),a("code",[t._v("B")]),t._v("查询上来，然后调用 "),a("code",[t._v("a.setB(b)")]),t._v(" 方法，于是 "),a("code",[t._v("a")]),t._v("对象"),a("code",[t._v("b")]),t._v("属性就有值了，接着完成"),a("code",[t._v("a.getB().getName()")]),t._v("方法的调用")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/yangxiaofei_java/article/details/111148980",target:"_blank",rel:"noopener noreferrer"}},[t._v("MyBatis延迟加载原理（源码剖析)"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"mybatis缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mybatis缓存"}},[t._v("#")]),t._v(" Mybatis缓存")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("Mybatis")]),t._v("提供一级缓存和二级缓存")]),t._v(" "),a("li",[t._v("一级缓存是一个"),a("code",[t._v("SqlSession")]),t._v("级别，"),a("code",[t._v("SqlSession")]),t._v("只能访问自己的一级缓存的数据。（"),a("code",[t._v("spring结合mybatis")]),t._v(",未开启事务下，每次都会产生新的"),a("code",[t._v("SqlSession")]),t._v(",一级缓存失效。）")])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://cloud.tencent.com/developer/article/1697591",target:"_blank",rel:"noopener noreferrer"}},[t._v("你凭什么说Spring会导致MyBatis的一级缓存失效！"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/u013887008/article/details/80379938",target:"_blank",rel:"noopener noreferrer"}},[t._v("spring结合mybatis时一级缓存失效问题"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("code",[t._v("Mybatis")]),t._v("的一级缓存原理：")]),t._v(" "),a("p",[t._v("第一次发出一个查询"),a("code",[t._v("sql")]),t._v("，"),a("code",[t._v("sql")]),t._v("查询结果写入"),a("code",[t._v("sqlsession")]),t._v("的一级缓存中，缓存使用的数据结构是一个"),a("code",[t._v("map")])]),t._v(" "),a("p",[a("code",[t._v("key")]),t._v("：hashcode+sql+sql输入参数+输出参数（sql的唯一标识）")]),t._v(" "),a("p",[a("code",[t._v("value")]),t._v("：用户信息")]),t._v(" "),a("p",[t._v("同一个"),a("code",[t._v("sqlsession")]),t._v("再次发出相同的"),a("code",[t._v("sql")]),t._v("，就从缓存中取不走数据库。如果两次中间出现"),a("code",[t._v("commit")]),t._v("操作（修改、添加、删除），本"),a("code",[t._v("sqlsession")]),t._v("中的一级缓存区域全部清空，下次再去缓存中查询不到所以要从数据库查询，从数据库查询到再写入缓存。")]),t._v(" "),a("p",[t._v("二级缓存原理：")]),t._v(" "),a("p",[t._v("二级缓存的范围是"),a("code",[t._v("mapper")]),t._v("级别（"),a("code",[t._v("mapper")]),t._v("同一个命名空间），"),a("code",[t._v("mapper")]),t._v("以命名空间为单位创建缓存数据结构，结构是"),a("code",[t._v("map")]),t._v("。")]),t._v(" "),a("p",[t._v("如果二级缓存中没有找到，再从一级缓存中去找，如果一级缓存中也没有，则从数据库中查询。")]),t._v(" "),a("p",[t._v("http://www.mybatis.cn/archives/809.html")])])}),[],!1,null,null,null);a.default=n.exports}}]);